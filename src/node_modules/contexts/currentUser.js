import React, { createContext, useReducer} from 'react'

//отвечает за назначение контекста

const initialState = {
  isLoading: false,
  isLoggedIn: null,
  currentUser: null,
}

const reduser = (state, action) => {
  switch (action.type) {
    case 'LOADING' :
      return {...state, isLoading: true}
    case 'SET_AUTHORIZED':
      return {...state, isLoggedIn: true, isLoading: false, currentUser: action.payload}
    case 'SET_UNAUTHORIZED':
      return {...state, isLoggedIn: false}
    default: return state
  }
}



const CurrentUserContext = createContext()

const CurrentUserProvider = ({ children }) => {
  const value = useReducer(reduser, initialState)
  // const [state, setState] = useState({

  // })
  return (
    //обертка для всех компонентов которым понадобитьсяд доступ к контексту
    <CurrentUserContext.Provider value={value}>{children}</CurrentUserContext.Provider>
  )
}

export { CurrentUserContext, CurrentUserProvider }
