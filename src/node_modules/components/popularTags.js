import React, { useEffect } from 'react';
import useFetch from 'hooks/useFetch'
import Loading from 'components/loading';
import ErrorMessage from 'components/errorMessage';
import { Link } from 'react-router-dom';

//компонент отвечающий за получение и отображения тегов
const PopularTags = () => {

  const [ {  response, isLoading, error }, doFetch] = useFetch('/tags')

  useEffect(() => {
  let mounted = true
  if (mounted) {
    doFetch()
  }
  //console
  return () => mounted = false
  }, [doFetch])



  if (isLoading || !response) {
    return <Loading/>
  }

  if (error) {
    return <ErrorMessage/>
  }

  // response.tags.splice(0, 10)

  return (
    <div className='sidebar'>
      <p>Popular tags</p>
      <div className='tag-list'>
        {response.tags.map(tag => (
          <Link to={`/tags/${tag}`}
          key={tag}
          className='tag-default tag-pill'>
          {tag}
          </Link>
        ))}
      </div>
    </div>
  );
};

export default PopularTags;
